<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CultureConnect - Explore the World Through Celebrations. Discover diverse festivals and cultural celebrations from around the globe.">
    <title>CultureConnect - Explore World Festivals</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        /* CSS Reset and Variables */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #D2691E;
            --secondary: #6B8E23;
            --accent: #FFD700;
            --dark-bg: #1A1A1A;
            --dark-bg-2: #0A1628;
            --light-text: #E8E8E8;
            --dark-text: #1A1A1A;
            --focus-color: #FFD700;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--dark-bg-2) 100%);
            color: var(--light-text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Skip to main content */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--accent);
            color: var(--dark-text);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 600;
            z-index: 100;
            border-radius: 0 0 8px 0;
        }

        .skip-link:focus {
            top: 0;
            outline: 3px solid var(--focus-color);
        }

        /* Typography */
        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            line-height: 1.2;
        }

        h1 { font-size: 3.5rem; }
        h2 { font-size: 2.5rem; }
        h3 { font-size: 1.8rem; }
        h4 { font-size: 1.3rem; }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 80px 20px;
            background: linear-gradient(135deg, rgba(210, 105, 30, 0.2), rgba(107, 142, 35, 0.2)),
                        url('https://images.unsplash.com/photo-1522083165195-3424ed129620?w=1600') center/cover;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 900px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-title {
            font-family: 'Great Vibes', cursive;
            font-size: 5rem;
            color: var(--accent);
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero-tagline {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--light-text);
        }

        .hero-description {
            font-size: 1.1rem;
            margin-bottom: 40px;
            line-height: 1.8;
            opacity: 0.9;
        }

        .btn {
            display: inline-block;
            padding: 16px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(210, 105, 30, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(210, 105, 30, 0.5);
        }

        .btn-primary:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 3px;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Section */
        section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 60px;
            color: var(--accent);
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.1rem;
            margin-top: 10px;
            opacity: 0.8;
        }

        /* World Map Section */
        .map-section {
            background: rgba(255, 255, 255, 0.03);
        }

        .world-map-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
        }

        .map-svg {
            width: 100%;
            height: auto;
            max-height: 600px;
        }

        .continent {
            fill: var(--secondary);
            stroke: var(--accent);
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .continent:hover,
        .continent:focus {
            fill: var(--primary);
            opacity: 1;
            stroke-width: 2;
        }

        .continent.active {
            fill: var(--accent);
            opacity: 1;
        }

        /* Filters */
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-group label {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--accent);
        }

        .search-input {
            padding: 12px 20px;
            border: 2px solid var(--glass-border);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light-text);
            font-size: 1rem;
            min-width: 250px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: 3px solid var(--focus-color);
            border-color: var(--accent);
        }

        .search-input::placeholder {
            color: rgba(232, 232, 232, 0.5);
        }

        .month-slider {
            width: 250px;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .month-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
        }

        .month-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: none;
        }

        .month-slider:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 3px;
        }

        .clear-filters {
            padding: 10px 24px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light-text);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .clear-filters:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .clear-filters:focus {
            outline: 3px solid var(--focus-color);
        }

        /* Festival Grid */
        .festival-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .festival-card {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            transition: all 0.3s ease;
            animation: fadeIn 0.5s ease-out;
        }

        .festival-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .festival-card:focus-within {
            outline: 3px solid var(--focus-color);
            outline-offset: 3px;
        }

        .festival-card-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .festival-card-content {
            padding: 20px;
        }

        .festival-card-title {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: var(--accent);
        }

        .festival-card-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .festival-card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(210, 105, 30, 0.95), rgba(107, 142, 35, 0.95));
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 30px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .festival-card:hover .festival-card-overlay,
        .festival-card:focus-within .festival-card-overlay {
            opacity: 1;
        }

        .overlay-purpose {
            font-size: 1rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .overlay-activities {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .overlay-activities ul {
            list-style: none;
            padding-left: 0;
        }

        .overlay-activities li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .overlay-activities li::before {
            content: '✦';
            position: absolute;
            left: 0;
            color: var(--accent);
        }

        /* Timeline */
        .timeline-section {
            background: rgba(255, 255, 255, 0.03);
        }

        .timeline-container {
            position: relative;
            padding: 40px 0;
        }

        .timeline-line {
            position: absolute;
            top: 50px;
            left: 5%;
            right: 5%;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary), var(--primary), var(--accent));
            border-radius: 2px;
        }

        .timeline-months {
            display: flex;
            justify-content: space-between;
            position: relative;
            padding: 0 5%;
        }

        .timeline-month {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-month:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 5px;
            border-radius: 8px;
        }

        .month-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--secondary);
            border: 3px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .timeline-month:hover .month-dot,
        .timeline-month.active .month-dot {
            transform: scale(1.3);
            background: var(--primary);
            box-shadow: 0 0 20px var(--accent);
        }

        .month-label {
            margin-top: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            text-align: center;
        }

        .month-festivals {
            display: none;
            margin-top: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            animation: fadeIn 0.3s ease;
        }

        .month-festivals.active {
            display: block;
        }

        .month-festivals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .month-festival-item {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .month-festival-item:hover,
        .month-festival-item:focus {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .month-festival-item:focus {
            outline: 3px solid var(--focus-color);
        }

        /* Detail Modal */
        .detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }

        .detail-modal.active {
            display: block;
        }

        .detail-content {
            max-width: 1000px;
            margin: 50px auto;
            padding: 40px;
            background: linear-gradient(135deg, var(--dark-bg), var(--dark-bg-2));
            border-radius: 20px;
            border: 2px solid var(--glass-border);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            transform: rotate(90deg);
            background: var(--accent);
            color: var(--dark-text);
        }

        .close-modal:focus {
            outline: 3px solid var(--focus-color);
        }

        .detail-header {
            margin-bottom: 30px;
        }

        .detail-title {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 15px;
        }

        .detail-meta {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            font-size: 1.1rem;
        }

        .detail-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-meta-item strong {
            color: var(--accent);
        }

        /* Gallery */
        .gallery {
            position: relative;
            margin: 40px 0;
            border-radius: 12px;
            overflow: hidden;
        }

        .gallery-main {
            position: relative;
            height: 500px;
        }

        .gallery-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .gallery-image.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .gallery-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            font-size: 1.1rem;
        }

        .gallery-controls {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 20px;
        }

        .gallery-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--dark-text);
        }

        .gallery-btn:hover {
            background: var(--accent);
            transform: scale(1.1);
        }

        .gallery-btn:focus {
            outline: 3px solid var(--focus-color);
        }

        .gallery-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .gallery-thumb {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.5;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .gallery-thumb.active,
        .gallery-thumb:hover {
            opacity: 1;
            border-color: var(--accent);
        }

        .gallery-thumb:focus {
            outline: 3px solid var(--focus-color);
        }

        /* Detail Sections */
        .detail-section {
            margin: 40px 0;
        }

        .detail-section h3 {
            color: var(--accent);
            margin-bottom: 20px;
        }

        .detail-section p {
            line-height: 1.8;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .activities-list {
            list-style: none;
            padding: 0;
        }

        .activities-list li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            font-size: 1.05rem;
            line-height: 1.6;
        }

        .activities-list li::before {
            content: '✦';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-size: 1.2rem;
        }

        .did-you-know {
            background: linear-gradient(135deg, rgba(210, 105, 30, 0.2), rgba(107, 142, 35, 0.2));
            padding: 30px;
            border-radius: 12px;
            border-left: 5px solid var(--accent);
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .did-you-know strong {
            color: var(--accent);
            display: block;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: var(--accent);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            font-size: 1.3rem;
            color: var(--accent);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            .hero-title { font-size: 3.5rem; }
            .hero-tagline { font-size: 1.3rem; }
            
            .festival-grid {
                grid-template-columns: 1fr;
            }

            .filters {
                flex-direction: column;
            }

            .timeline-months {
                flex-wrap: wrap;
                gap: 20px;
            }

            .detail-content {
                margin: 20px;
                padding: 30px 20px;
            }

            .detail-title {
                font-size: 2rem;
            }

            .gallery-main {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .hero-title { font-size: 2.5rem; }
            .btn { padding: 12px 30px; }
            .month-label { font-size: 0.7rem; }
        }

        /* Focus visible for keyboard navigation */
        *:focus-visible {
            outline: 3px solid var(--focus-color);
            outline-offset: 3px;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Hero Section -->
    <header class="hero" role="banner">
        <div class="hero-content">
            <h1 class="hero-title">CultureConnect</h1>
            <p class="hero-tagline">Explore the World Through Celebrations</p>
            <p class="hero-description">
                Discover diverse festivals and cultural celebrations from around the globe. 
                Immerse yourself in the traditions, stories, and joy that unite us all.
            </p>
            <a href="#festival-catalog" class="btn btn-primary" aria-label="Explore festivals from around the world">Explore Festivals</a>
        </div>
    </header>

    <main id="main-content">
        <!-- World Map Section -->
        <section class="map-section" aria-labelledby="map-title">
            <div class="container">
                <h2 id="map-title" class="section-title">Explore by Region</h2>
                <p class="section-subtitle">Click on a continent to discover its festivals</p>
                
                <div class="world-map-container">
                    <svg class="map-svg" viewBox="0 0 1000 500" role="img" aria-label="Interactive world map showing continents">
                        <title>World Map - Click continents to filter festivals</title>
                        <!-- Africa -->
                        <path class="continent" data-continent="Africa" tabindex="0" role="button" aria-label="Africa - 3 festivals"
                            d="M 520 200 L 540 210 L 545 230 L 540 250 L 535 270 L 540 290 L 530 310 L 520 320 L 505 315 L 495 305 L 490 285 L 485 265 L 480 245 L 485 225 L 500 210 Z"
                            fill="var(--secondary)" stroke="var(--accent)" stroke-width="1" />
                        
                        <!-- Europe -->
                        <path class="continent" data-continent="Europe" tabindex="0" role="button" aria-label="Europe - 6 festivals"
                            d="M 480 140 L 510 135 L 540 140 L 560 155 L 565 170 L 555 185 L 535 190 L 515 185 L 495 175 L 485 160 Z"
                            fill="var(--secondary)" stroke="var(--accent)" stroke-width="1" />
                        
                        <!-- Asia -->
                        <path class="continent" data-continent="Asia" tabindex="0" role="button" aria-label="Asia - 10 festivals"
                            d="M 570 150 L 650 145 L 720 155 L 760 170 L 780 190 L 785 215 L 775 240 L 750 255 L 715 260 L 680 255 L 650 245 L 620 230 L 590 210 L 570 185 Z"
                            fill="var(--secondary)" stroke="var(--accent)" stroke-width="1" />
                        
                        <!-- Americas -->
                        <path class="continent" data-continent="Americas" tabindex="0" role="button" aria-label="Americas - 5 festivals"
                            d="M 220 150 L 250 145 L 270 160 L 280 185 L 285 215 L 280 245 L 275 275 L 270 305 L 255 330 L 235 340 L 220 335 L 210 310 L 205 280 L 200 250 L 205 220 L 215 190 Z"
                            fill="var(--secondary)" stroke="var(--accent)" stroke-width="1" />
                        
                        <!-- Oceania -->
                        <path class="continent" data-continent="Oceania" tabindex="0" role="button" aria-label="Oceania - 1 festival"
                            d="M 800 320 L 830 315 L 860 320 L 875 335 L 880 355 L 870 370 L 850 375 L 825 370 L 810 355 L 805 340 Z"
                            fill="var(--secondary)" stroke="var(--accent)" stroke-width="1" />
                    </svg>
                </div>

                <div role="status" aria-live="polite" class="sr-only" id="map-status"></div>
            </div>
        </section>

        <!-- Festival Catalog Section -->
        <section id="festival-catalog" aria-labelledby="catalog-title">
            <div class="container">
                <h2 id="catalog-title" class="section-title">Festival Catalog</h2>
                
                <!-- Filters -->
                <div class="filters" role="search" aria-label="Festival filters">
                    <div class="filter-group">
                        <label for="search-input">Search Festivals</label>
                        <input type="text" id="search-input" class="search-input" placeholder="Search by name or country..." aria-label="Search festivals by name or country" />
                    </div>
                    
                    <div class="filter-group">
                        <label for="month-slider">Filter by Month: <span id="month-label">All Months</span></label>
                        <input type="range" id="month-slider" class="month-slider" min="0" max="12" value="0" aria-label="Filter festivals by month" aria-valuemin="0" aria-valuemax="12" aria-valuenow="0" />
                    </div>
                    
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="clear-filters" id="clear-filters" aria-label="Clear all filters">Clear Filters</button>
                    </div>
                </div>

                <div role="status" aria-live="polite" aria-atomic="true" id="results-count" class="sr-only"></div>

                <!-- Festival Grid -->
                <div class="festival-grid" id="festival-grid" role="list" aria-label="Festival cards">
                    <!-- Festival cards will be inserted here by JavaScript -->
                </div>

                <div class="no-results" id="no-results" style="display: none;" role="alert">
                    No festivals found. Try adjusting your filters.
                </div>
            </div>
        </section>

        <!-- Timeline Section -->
        <section class="timeline-section" aria-labelledby="timeline-title">
            <div class="container">
                <h2 id="timeline-title" class="section-title">Annual Festival Timeline</h2>
                <p class="section-subtitle">Explore festivals throughout the year</p>
                
                <div class="timeline-container">
                    <div class="timeline-line" role="presentation"></div>
                    <div class="timeline-months" role="list" aria-label="Monthly timeline">
                        <!-- Timeline months will be inserted here -->
                    </div>
                    
                    <div id="month-festivals-container">
                        <!-- Month festival details will be inserted here -->
                    </div>
                </div>

                <div role="status" aria-live="polite" class="sr-only" id="timeline-status"></div>
            </div>
        </section>
    </main>

    <!-- Detail Modal -->
    <div class="detail-modal" id="detail-modal" role="dialog" aria-modal="true" aria-labelledby="detail-modal-title">
        <div class="detail-content">
            <button class="close-modal" id="close-modal" aria-label="Close festival details">&times;</button>
            
            <div id="modal-content">
                <!-- Festival details will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Festival Data
        const festivalsData = [
            {
                id: 1,
                name: "Diwali",
                country: "India",
                continent: "Asia",
                month: 11,
                purpose: "Festival of Lights - triumph of light over darkness, good over evil. A celebration of spiritual victory and renewal.",
                history: "Diwali's origins trace back over 2,500 years to ancient Hindu texts like the Ramayana and Mahabharata. The festival celebrates Lord Rama's return from exile and his victory over the demon Ravana. Over centuries, Diwali has evolved to be celebrated by Hindus, Sikhs, Buddhists, and Jains across India and the world, each with their own traditions and significance.",
                mainActivities: [
                    "Lighting oil lamps (diyas) to symbolize light",
                    "Bursting fireworks across the sky",
                    "Exchange of sweets and gifts with loved ones",
                    "Wearing new clothes and decorations",
                    "Family gatherings and feasts",
                    "Rangoli (decorative colorful patterns)"
                ],
                didYouKnow: "During Diwali, over 300 million oil lamps are lit across India. The festival is celebrated by more than 1 billion people worldwide.",
                images: [
                    { url: "https://images.unsplash.com/photo-1606144231984-8505220c5ecd?w=800", caption: "Traditional oil lamps (diyas) lit during Diwali", alt: "Row of burning oil lamps illuminating the darkness" },
                    { url: "https://images.unsplash.com/photo-1609249068813-4e7877a95eca?w=800", caption: "Colorful rangoli patterns", alt: "Intricate colorful decorative rangoli pattern" },
                    { url: "https://images.unsplash.com/photo-1606144231984-8505220c5ecd?w=800", caption: "Diwali celebration with lights", alt: "Diwali lights and decorations" },
                    { url: "https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=800", caption: "Fireworks during Diwali", alt: "Colorful fireworks lighting up the night sky" }
                ],
                duration: "5 days",
                scale: "National"
            },
            {
                id: 2,
                name: "Holi",
                country: "India",
                continent: "Asia",
                month: 3,
                purpose: "Festival of Colors - celebrating the arrival of spring, victory of good over evil, and the renewal of relationships.",
                history: "Holi is one of the oldest and most significant Hindu festivals, dating back to pre-Christian times. The festival has deep roots in Hindu mythology, particularly the story of Prahlad and the demon Holika. Over centuries, Holi has evolved into a celebration of spring and new beginnings, embracing all people regardless of caste or creed.",
                mainActivities: [
                    "Playing with colored powder (gulal)",
                    "Throwing colored water balloons and spraying water",
                    "Building and burning bonfires (Holika Dahan)",
                    "Preparing traditional sweets and snacks",
                    "Family and community gatherings",
                    "Singing traditional Holi songs"
                ],
                didYouKnow: "Holi is often called the 'Festival of Colors' and is celebrated with equal enthusiasm by people of all religions in India. The colors used are traditionally made from natural ingredients like flowers and herbs.",
                images: [
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Children playing with Holi colors", alt: "People playing with colorful powder during Holi" },
                    { url: "https://images.unsplash.com/photo-1604981809414-70c1e3eb8bb2?w=800", caption: "Colored powder in the air", alt: "Vibrant colored powder clouds" },
                    { url: "https://images.unsplash.com/photo-1488286313714-a70c5b4c6e9f?w=800", caption: "Holi bonfire celebration", alt: "Traditional Holi bonfire (Holika Dahan)" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Holi festival gathering", alt: "People celebrating together during Holi" }
                ],
                duration: "2 days",
                scale: "National"
            },
            {
                id: 3,
                name: "Chinese New Year (Spring Festival)",
                country: "China",
                continent: "Asia",
                month: 2,
                purpose: "Lunar New Year celebration marking the beginning of a new year in the lunar calendar, symbolizing new beginnings and family unity.",
                history: "Chinese New Year is one of the most important and celebrated holidays in Chinese culture, with a history spanning over 3,500 years. Also known as the Spring Festival or Lunar New Year, it marks the beginning of a new year in the lunar calendar. The celebration is rooted in ancient rituals to ward off evil spirits and welcome good fortune and prosperity.",
                mainActivities: [
                    "Family reunions and feasts",
                    "Decorating with red lanterns and couplets",
                    "Exchanging red envelopes (hongbao) with money",
                    "Setting off fireworks and firecrackers",
                    "Lion and dragon dances through streets",
                    "Cleaning homes to sweep away bad luck"
                ],
                didYouKnow: "Chinese New Year is celebrated by over 2 billion people worldwide. The celebration lasts for 15 days, with the first day being the most important.",
                images: [
                    { url: "https://images.unsplash.com/photo-1582039494576-5146fb764875?w=800", caption: "Red lanterns during Chinese New Year", alt: "Vibrant red lanterns hanging in celebration" },
                    { url: "https://images.unsplash.com/photo-1616137466211-f939a420be19?w=800", caption: "Dragon dance performance", alt: "Elaborate dragon dance with performers" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Fireworks during celebration", alt: "Colorful fireworks lighting the night sky" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Traditional decorations", alt: "Red envelopes and traditional decorations" }
                ],
                duration: "15 days",
                scale: "International"
            },
            {
                id: 4,
                name: "Oktoberfest",
                country: "Germany",
                continent: "Europe",
                month: 10,
                purpose: "World's largest beer festival celebrating Bavarian culture, beer, and autumn traditions with food and music.",
                history: "Oktoberfest began in 1810 as a celebration of the royal wedding of Crown Prince Ludwig and Princess Therese of Saxe-Hildburghausen. What started as a one-time celebration has evolved into the world's largest annual folk festival. Held annually in Munich, Bavaria, it has become a symbol of German culture and beer heritage worldwide.",
                mainActivities: [
                    "Drinking traditional Bavarian beer from large mugs",
                    "Eating traditional Bavarian food (bratwurst, pretzels)",
                    "Traditional Bavarian music and dancing",
                    "Parade of breweries and beer wagons",
                    "Wearing traditional Bavarian costumes (Tracht)",
                    "Beer hall competitions and games"
                ],
                didYouKnow: "Oktoberfest attracts around 6 million visitors from around the world each year. The festival spans 16 days and uses approximately 1.4 million liters of beer annually.",
                images: [
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Oktoberfest beer celebration", alt: "People celebrating with traditional Bavarian beer" },
                    { url: "https://images.unsplash.com/photo-1504679641063-759bb6dd3a4e?w=800", caption: "Traditional Bavarian costumes", alt: "People in traditional Bavarian clothing" },
                    { url: "https://images.unsplash.com/photo-1555939594-58d7cb561404?w=800", caption: "Bavarian music and dancing", alt: "Traditional Bavarian band performing" },
                    { url: "https://images.unsplash.com/photo-1528148343865-4218c5c55bfd?w=800", caption: "Traditional pretzels and food", alt: "Large Bavarian pretzels on display" }
                ],
                duration: "16 days",
                scale: "International"
            },
            {
                id: 5,
                name: "Carnival (Rio de Janeiro)",
                country: "Brazil",
                continent: "Americas",
                month: 2,
                purpose: "Celebration of Brazilian culture, music, and dance with elaborate parades and costumes before the Christian season of Lent.",
                history: "Rio Carnival originated as a Portuguese tradition brought to Brazil during colonization. Over centuries, it blended with African, indigenous, and European influences to create a unique celebration. The modern Rio Carnival, with its samba schools and elaborate floats, became the world-famous festival we know today, first held in its current grand scale in the early 20th century.",
                mainActivities: [
                    "Samba school parades with elaborate floats",
                    "Dancing to traditional samba music",
                    "Wearing elaborate feathered and sequined costumes",
                    "Street parties and balls across the city",
                    "Live music performances",
                    "Fireworks and light displays"
                ],
                didYouKnow: "Rio Carnival attracts nearly 2 million visitors and 500,000 performers. The samba school parades feature floats that can cost over $100,000 to construct.",
                images: [
                    { url: "https://images.unsplash.com/photo-1510812431401-26ff5984c3e5?w=800", caption: "Samba parade floats", alt: "Elaborate Carnival float with dancers" },
                    { url: "https://images.unsplash.com/photo-1476973422084-e8fa66ff9895?w=800", caption: "Colorful Carnival costumes", alt: "Elaborate feathered and sequined costumes" },
                    { url: "https://images.unsplash.com/photo-1551836022-4ad7b5265e1d?w=800", caption: "Street celebration", alt: "Crowded street celebration with dancers" },
                    { url: "https://images.unsplash.com/photo-1570370142ef20f08e06b22227b46dc85?w=800", caption: "Night parade", alt: "Illuminated parade floats at night" }
                ],
                duration: "4 days",
                scale: "International"
            },
            {
                id: 6,
                name: "Day of the Dead (Día de Muertos)",
                country: "Mexico",
                continent: "Americas",
                month: 11,
                purpose: "Celebration honoring deceased loved ones with altars, marigolds, and traditional foods, blending indigenous and Catholic traditions.",
                history: "Day of the Dead has roots in ancient Aztec and Mayan civilizations where death was honored as part of the natural cycle. When Spanish conquistadors arrived, these traditions blended with Catholicism, creating the modern celebration. It became a UNESCO Intangible Cultural Heritage in 2005, recognized as a unique fusion of indigenous and European influences.",
                mainActivities: [
                    "Building ornate altars (ofrendas) for deceased family members",
                    "Decorating with marigold flowers (cempasúchil)",
                    "Preparing traditional foods like pan de muerto",
                    "Creating and wearing skull makeup (calavera)",
                    "Cemetery vigils and family gatherings",
                    "Parades with skeleton costumes"
                ],
                didYouKnow: "The marigold flowers are believed to guide spirits to their altars. In Mexico, Day of the Dead is considered a celebration of life rather than a mournful event, with humor and joy being central to the festivities.",
                images: [
                    { url: "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=800", caption: "Ornate Day of Dead altar", alt: "Traditional ofrenda with candles and flowers" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Skull makeup and decorations", alt: "Traditional skull face makeup" },
                    { url: "https://images.unsplash.com/photo-1604981809414-70c1e3eb8bb2?w=800", caption: "Marigold flower decoration", alt: "Bright marigold flowers" },
                    { url: "https://images.unsplash.com/photo-1604981809414-70c1e3eb8bb2?w=800", caption: "Cemetery celebration", alt: "Cemetery gathering during Day of the Dead" }
                ],
                duration: "2 days",
                scale: "National"
            },
            {
                id: 7,
                name: "Timkat",
                country: "Ethiopia",
                continent: "Africa",
                month: 1,
                purpose: "Ethiopian Orthodox celebration of the baptism of Jesus Christ with holy water immersion and colorful processions.",
                history: "Timkat is one of the oldest and most important festivals in the Ethiopian Orthodox Tewahedo Church. It celebrates the baptism of Jesus Christ in the Jordan River. The festival has been celebrated for centuries in Ethiopia, with roots in early Christian traditions, and continues to be a major religious and cultural event in Ethiopian society.",
                mainActivities: [
                    "Holy water immersion ceremonies",
                    "Colorful processions with decorated clergy",
                    "Singing and chanting of religious hymns",
                    "Wearing white cotton clothes (shemma)",
                    "Community celebrations and gatherings",
                    "Feasting with traditional Ethiopian food"
                ],
                didYouKnow: "Timkat is celebrated for three days, with the main event being the Timkat Eve (Ketera) when clergy bless holy water. Thousands of pilgrims visit holy sites during the festival, and it is one of Ethiopia's most significant cultural events.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Timkat holy water ceremony", alt: "Ethiopian Timkat water blessing ceremony" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Religious procession", alt: "Colorful Timkat procession with clergy" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "White celebration attire", alt: "People wearing white clothes for Timkat" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Festival gathering", alt: "Large gathering during Timkat celebration" }
                ],
                duration: "3 days",
                scale: "National"
            },
            {
                id: 8,
                name: "La Tomatina",
                country: "Spain",
                continent: "Europe",
                month: 8,
                purpose: "Festival where participants playfully throw tomatoes at each other, celebrating abundance and community joy.",
                history: "La Tomatina began in 1945 in Valencia, Spain, with unclear origins. Some believe it started as a spontaneous act of rebellion, while others suggest it began as a way to celebrate excess tomato harvests. Over decades, it has evolved into the world's largest food fight festival, attracting thousands of participants from around the world.",
                mainActivities: [
                    "Throwing tomatoes at each other",
                    "Creating tomato juice rivers through streets",
                    "Musical performances and parades",
                    "Fireworks displays",
                    "Traditional Spanish food and drinks",
                    "Nighttime beach celebrations"
                ],
                didYouKnow: "La Tomatina uses over 150,000 tomatoes during the festival. The event is so popular that the town of Buñol limits participation to 20,000 people to manage crowds safely.",
                images: [
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Tomato throwing festival", alt: "Participants throwing tomatoes at each other" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Tomato juice streets", alt: "Streets filled with tomato juice" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Festival fun", alt: "People covered in tomato juice" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Celebrating together", alt: "Festival celebration" }
                ],
                duration: "1 day",
                scale: "International"
            },
            {
                id: 9,
                name: "Lantern Festival",
                country: "China",
                continent: "Asia",
                month: 2,
                purpose: "Celebration of the first full moon of the lunar year with lanterns, riddles, and reunion with family.",
                history: "The Lantern Festival marks the end of Chinese New Year celebrations and originated during the Han Dynasty. It celebrates the coming of spring and the reunion of families. The tradition of displaying lanterns symbolizes the brightness and warmth of the festival, and riddle games on lanterns became a popular form of entertainment during imperial times.",
                mainActivities: [
                    "Releasing sky lanterns into the night",
                    "Displaying elaborate paper lanterns",
                    "Guessing lantern riddles",
                    "Eating tangyuan (sweet glutinous rice balls)",
                    "Lion and dragon dances",
                    "Fireworks displays"
                ],
                didYouKnow: "In Taiwan, the Lantern Festival sees thousands of sky lanterns released, creating a magical display. The tradition of eating tangyuan symbolizes family unity and togetherness.",
                images: [
                    { url: "https://images.unsplash.com/photo-1582039494576-5146fb764875?w=800", caption: "Sky lanterns lighting the night", alt: "Thousands of glowing sky lanterns in the night sky" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Lantern display", alt: "Elaborate paper lantern display" },
                    { url: "https://images.unsplash.com/photo-1616137466211-f939a420be19?w=800", caption: "Festival celebration", alt: "Lantern Festival celebration" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Community gathering", alt: "People gathering for Lantern Festival" }
                ],
                duration: "1 day",
                scale: "International"
            },
            {
                id: 10,
                name: "Songkran (Thai New Year)",
                country: "Thailand",
                continent: "Asia",
                month: 4,
                purpose: "Celebration of Thai New Year with water splashing symbolizing purification and fresh beginnings.",
                history: "Songkran is the traditional Thai New Year festival, celebrated for over 2,700 years. The water-throwing tradition symbolizes the washing away of bad luck and negativity from the past year, welcoming new beginnings with purification. The festival blends Buddhist traditions, astrological beliefs, and cultural practices that have been preserved through generations.",
                mainActivities: [
                    "Playful water splashing and water gun battles",
                    "Pouring water on Buddha images",
                    "Preparing traditional Thai dishes",
                    "Visiting temples for merit-making",
                    "Applying sticky rice paste on faces",
                    "Parades with traditional floats"
                ],
                didYouKnow: "Songkran is considered the world's largest water festival. In Thailand, it's believed that splashing water cleanses people of misfortune and brings luck and prosperity for the new year.",
                images: [
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Water festival celebration", alt: "Water splashing during Songkran" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Water bucket fun", alt: "Participants in water bucket game" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Temple blessing", alt: "Buddha statue with water ceremony" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Street celebration", alt: "Street water festival" }
                ],
                duration: "3 days",
                scale: "National"
            },
            {
                id: 11,
                name: "Bastille Day",
                country: "France",
                continent: "Europe",
                month: 7,
                purpose: "French national holiday celebrating the storming of the Bastille and the French Revolution with fireworks and parades.",
                history: "Bastille Day commemorates July 14, 1789, when the Bastille was stormed during the French Revolution, marking the birth of modern democracy in France. The event symbolizes the French people's liberation from monarchy and feudalism. It became the national holiday of France in 1880 and is celebrated as a symbol of French freedom and unity worldwide.",
                mainActivities: [
                    "Fireworks displays across major cities",
                    "Military parades down the Champs-Élysées",
                    "National flag displays and decorations",
                    "Street parties and community gatherings",
                    "Traditional French cuisine and wine",
                    "Dancing and concerts"
                ],
                didYouKnow: "The Bastille Day parade on the Champs-Élysées in Paris is one of the world's largest military parades. The fireworks display at the Eiffel Tower attracts crowds from around the world.",
                images: [
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Eiffel Tower fireworks", alt: "Fireworks exploding over the Eiffel Tower" },
                    { url: "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800", caption: "Military parade", alt: "Military parade on Champs-Élysées" },
                    { url: "https://images.unsplash.com/photo-1514640292122-2db0a3f56d14?w=800", caption: "Street celebration", alt: "Bastille Day street party" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "French flags and decorations", alt: "French flag decorations" }
                ],
                duration: "1 day",
                scale: "National"
            },
            {
                id: 12,
                name: "Obon Festival",
                country: "Japan",
                continent: "Asia",
                month: 8,
                purpose: "Japanese summer festival honoring ancestors with dances, fireworks, and family gatherings during the Obon holiday.",
                history: "Obon is one of Japan's most important festivals, with roots in ancient Buddhist traditions dating back over 500 years. The festival celebrates the return of ancestral spirits to the living world. Obon blends Buddhist and Shinto practices, making it a deeply spiritual occasion where families gather to honor their deceased relatives and strengthen family bonds.",
                mainActivities: [
                    "Bon dances (Bon-odori) in traditional yukata",
                    "Fireworks displays",
                    "Preparing special foods for ancestors",
                    "Visiting family graves",
                    "Lantern floating on rivers (toro nagashi)",
                    "Family reunions and gatherings"
                ],
                didYouKnow: "During Obon, millions of Japanese travel to their hometowns for family reunions. The lantern floating ceremony is believed to guide ancestral spirits back to the afterlife.",
                images: [
                    { url: "https://images.unsplash.com/photo-1582039494576-5146fb764875?w=800", caption: "Lantern floating ceremony", alt: "Lanterns floating on water during Obon" },
                    { url: "https://images.unsplash.com/photo-1618885472179-5e474019fdf0?w=800", caption: "Bon dance performance", alt: "People dancing in traditional yukata" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Fireworks festival", alt: "Fireworks during Obon celebration" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Festival gathering", alt: "People gathering during Obon" }
                ],
                duration: "3 days",
                scale: "National"
            },
            {
                id: 13,
                name: "Vesak (Buddha's Birthday)",
                country: "Sri Lanka",
                continent: "Asia",
                month: 5,
                purpose: "Buddhist festival celebrating the birth, enlightenment, and death of Gautama Buddha with prayers and celebrations.",
                history: "Vesak celebrates the life and teachings of Buddha and is one of the most important Buddhist festivals worldwide. It commemorates Buddha's birth, enlightenment, and parinirvana all on the same date in the lunar calendar. Celebrated for over 2,000 years, Vesak emphasizes Buddhist values of compassion, peace, and spiritual enlightenment.",
                mainActivities: [
                    "Visiting temples for prayer and meditation",
                    "Releasing lanterns into the sky",
                    "Creating colorful lantern displays (Vesak lanterns)",
                    "Preparing and distributing alms",
                    "Religious processions",
                    "Symbolic reenactments of Buddha's life"
                ],
                didYouKnow: "Vesak lanterns are traditional paper lanterns hung to commemorate Buddha's enlightenment. In Sri Lanka, Vesak is celebrated with elaborate street decorations and pandals (temporary structures) depicting Buddhist stories.",
                images: [
                    { url: "https://images.unsplash.com/photo-1582039494576-5146fb764875?w=800", caption: "Vesak lantern display", alt: "Colorful Vesak lanterns decorating the streets" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Temple celebration", alt: "Buddha statue decorated for Vesak" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Lantern release", alt: "Sky lanterns floating during Vesak" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Community gathering", alt: "People gathered at temple for Vesak" }
                ],
                duration: "1 day",
                scale: "International"
            },
            {
                id: 14,
                name: "Ramadan & Eid al-Fitr",
                country: "Saudi Arabia",
                continent: "Asia",
                month: 3,
                purpose: "Islamic holy month of fasting and prayer, culminating in the joyous Eid celebration with family and community.",
                history: "Ramadan is the ninth month of the Islamic lunar calendar when Muslims fast from sunrise to sunset. The month commemorates the revelation of the Quran to Prophet Muhammad. Eid al-Fitr, the Festival of Breaking the Fast, celebrates the end of Ramadan and is one of the most important festivals in Islam, celebrated by nearly 2 billion Muslims worldwide.",
                mainActivities: [
                    "Daily fasting from dawn to sunset",
                    "Evening prayers and Quran recitation",
                    "Sharing meals with family and community",
                    "Giving to charity (Zakat)",
                    "Eid prayers and feasts",
                    "Exchange of greetings and gifts"
                ],
                didYouKnow: "Ramadan is believed to be the month when the Quran was first revealed. Eid al-Fitr is celebrated with special prayers, festive meals, new clothes, and acts of charity throughout the Muslim world.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Iftar meal gathering", alt: "Family gathered for Iftar breaking fast" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Evening prayers", alt: "People praying in mosque during Ramadan" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Eid celebration", alt: "Eid festival celebration" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Festive gathering", alt: "Family gathering during Eid" }
                ],
                duration: "30 days (Ramadan) + 3 days (Eid)",
                scale: "International"
            },
            {
                id: 15,
                name: "Baisakhi",
                country: "India",
                continent: "Asia",
                month: 4,
                purpose: "Punjabi spring festival celebrating the harvest and the founding of the Khalsa in Sikhism.",
                history: "Baisakhi marks the beginning of the Punjabi solar new year and celebrates the spring harvest. For Sikhs, Baisakhi is particularly significant as it commemorates the founding of the Khalsa by Guru Gobind Singh in 1699. The festival blends agricultural celebration with religious significance, making it a day of joy and spiritual importance in Punjabi culture.",
                mainActivities: [
                    "Bhangra dancing",
                    "Giddha (traditional female dance)",
                    "Bonfires and celebrations",
                    "Wearing colorful traditional clothes",
                    "Feasting on traditional Punjabi food",
                    "Visiting Sikh temples (Gurudwara)"
                ],
                didYouKnow: "Baisakhi is celebrated by Punjabis across India, Pakistan, and the diaspora worldwide. The vibrant Bhangra dance is a highlight, performed in circles with rhythmic hand movements and energetic jumps.",
                images: [
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Bhangra dance", alt: "People dancing Bhangra in traditional dress" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Harvest celebration", alt: "Baisakhi harvest festival" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Traditional costumes", alt: "People in colorful traditional Punjabi clothes" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Festival gathering", alt: "Community gathering during Baisakhi" }
                ],
                duration: "1 day",
                scale: "Regional"
            },
            {
                id: 16,
                name: "Carnival (Venice)",
                country: "Italy",
                continent: "Europe",
                month: 2,
                purpose: "Venetian masquerade festival with elaborate masks and costumes celebrating Venetian culture and history.",
                history: "The Venice Carnival originated in the 12th century and became famous for its elaborate masks and costumes in the 18th century. The festival was a time when social classes mingled freely due to disguises, making it a unique celebration of freedom and equality. After declining during French and Austrian rule, the Carnival was revived in the 1970s and is now a major international festival.",
                mainActivities: [
                    "Wearing elaborate Venetian masks",
                    "Costume balls and parades",
                    "Street performances and entertainment",
                    "Traditional Venetian music",
                    "Feasting on traditional food",
                    "Photography and people-watching"
                ],
                didYouKnow: "The iconic Venetian masks, such as Volto and Bauta, have distinct meanings and histories. The Carnival attracts over 3 million visitors annually, transforming Venice into a magical masked ball.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Elaborate Venetian masks", alt: "Person wearing ornate Venetian mask" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Costume parade", alt: "Parade of costumed performers" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Masked celebration", alt: "Masked participants celebrating" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Street performance", alt: "Street performer in carnival costume" }
                ],
                duration: "2 weeks",
                scale: "International"
            },
            {
                id: 17,
                name: "Mardi Gras",
                country: "United States",
                continent: "Americas",
                month: 2,
                purpose: "New Orleans celebration featuring parades, floats, and parties before the Christian Lenten season.",
                history: "Mardi Gras ('Fat Tuesday') has French origins and was brought to Louisiana by French colonists. The first Mardi Gras in New Orleans was celebrated in 1703. Over centuries, it evolved into a unique American celebration blending French, Spanish, African, and Native American cultures. The modern Mardi Gras festival features elaborate parade floats, throws, and celebrations.",
                mainActivities: [
                    "Parade floats with decorations and performers",
                    "Throwing beads and doubloons to crowds",
                    "Wearing masks and costumes",
                    "Live music and jazz performances",
                    "Traditional New Orleans food (king cake, gumbo)",
                    "Street parties and celebrations"
                ],
                didYouKnow: "Mardi Gras is the largest and most famous street festival in America. Participants throw over 350 tons of beads during the parade season, and the tradition of catching throws has become iconic.",
                images: [
                    { url: "https://images.unsplash.com/photo-1510812431401-26ff5984c3e5?w=800", caption: "Parade floats", alt: "Elaborate Mardi Gras parade float" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Beads and decorations", alt: "Colorful beads and decorations" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Street celebration", alt: "Crowded street celebration" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Live music", alt: "Jazz band performing" }
                ],
                duration: "2 weeks",
                scale: "International"
            },
            {
                id: 18,
                name: "Thanksgiving",
                country: "United States",
                continent: "Americas",
                month: 11,
                purpose: "American holiday celebrating gratitude, family gatherings, and harvest traditions.",
                history: "Thanksgiving has origins in harvest celebrations of early American colonists and Native Americans. The first official Thanksgiving was proclaimed by President Abraham Lincoln in 1863. Over time, it has evolved into America's most celebrated family holiday, observed by Americans regardless of religious affiliation.",
                mainActivities: [
                    "Family gatherings and reunions",
                    "Traditional turkey feast",
                    "Giving thanks and saying grace",
                    "Watching football games",
                    "Preparing traditional dishes (stuffing, pie)",
                    "Black Friday shopping"
                ],
                didYouKnow: "Thanksgiving is the busiest travel period in America. Over 55 million turkeys are consumed during Thanksgiving, and nearly 4 million pumpkin pies are eaten.",
                images: [
                    { url: "https://images.unsplash.com/photo-1585518419759-59831ba5eace?w=800", caption: "Thanksgiving feast", alt: "Traditional Thanksgiving turkey dinner" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Family gathering", alt: "Family gathered around Thanksgiving table" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Traditional food", alt: "Thanksgiving pumpkin pie" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Harvest decorations", alt: "Thanksgiving harvest decorations" }
                ],
                duration: "1 day",
                scale: "National"
            },
            {
                id: 19,
                name: "Beltane",
                country: "Scotland",
                continent: "Europe",
                month: 5,
                purpose: "Ancient Celtic fire festival marking the beginning of summer with bonfires and community celebrations.",
                history: "Beltane is an ancient Celtic festival dating back thousands of years, marking the transition from spring to summer. In Celtic tradition, it was believed to be a time when the boundaries between the living and supernatural worlds blurred. The modern Beltane Fire Festival was revived in 1988 in Edinburgh and has become a popular international celebration of fire, art, and community.",
                mainActivities: [
                    "Bonfires and fire performances",
                    "Fire-eating and juggling",
                    "Processional parades",
                    "Costume and body art",
                    "Live music and dancing",
                    "Community celebrations"
                ],
                didYouKnow: "The Beltane Fire Festival is one of the largest outdoor festivals in Scotland, attracting thousands of participants and performers from around the world.",
                images: [
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Fire performance", alt: "Fire performer with flaming torches" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Bonfire celebration", alt: "Large bonfire at Beltane" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Costume parade", alt: "Elaborate costumed parade" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Community gathering", alt: "People gathered at Beltane festival" }
                ],
                duration: "2 days",
                scale: "International"
            },
            {
                id: 20,
                name: "Midsummer Festival",
                country: "Sweden",
                continent: "Europe",
                month: 6,
                purpose: "Celebration of the summer solstice with bonfires, dancing, and traditional Swedish traditions.",
                history: "Midsummer is a ancient Swedish celebration tied to the summer solstice and pagan traditions. The festival blends pre-Christian Scandinavian customs with Christian traditions, creating a unique celebration of light and community. Celebrated for centuries, Midsummer is one of Sweden's most important holidays after Christmas.",
                mainActivities: [
                    "Raising the maypole and dancing around it",
                    "Wearing traditional Swedish costumes",
                    "Bonfires and light celebrations",
                    "Traditional Swedish food and drink",
                    "Flower garland decorations",
                    "Music and dancing"
                ],
                didYouKnow: "In Sweden, Midsummer is celebrated with a maypole decorated with flowers and leaves. Swedes believe that Midsummer night has magical properties and traditionally leave out food for good spirits.",
                images: [
                    { url: "https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=800", caption: "Maypole decoration", alt: "Decorated maypole surrounded by people" },
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Traditional dancing", alt: "People dancing around maypole" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Bonfire", alt: "Bonfire celebration during Midsummer" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Festive gathering", alt: "Community gathering at Midsummer" }
                ],
                duration: "1 day",
                scale: "National"
            },
            {
                id: 21,
                name: "Burning Man",
                country: "United States",
                continent: "Americas",
                month: 9,
                purpose: "Art festival celebrating self-expression, community, and creativity in the Nevada desert.",
                history: "Burning Man began in 1986 when a group of friends burned a wooden effigy on a San Francisco beach. The event moved to Nevada's Black Rock Desert in 1990 and has evolved into one of the world's most unique festivals. With over 70,000 participants from around the world, Burning Man represents a temporary city dedicated to art, self-expression, and community.",
                mainActivities: [
                    "Art installations and performances",
                    "Theme camps and community gatherings",
                    "Burning the Man effigy on Saturday night",
                    "Burning the Temple (memorial structure)",
                    "Radical self-expression through costumes",
                    "Music and electronic performances"
                ],
                didYouKnow: "Burning Man creates a temporary city of 70,000+ people in the desert. The festival is based on principles of community, self-expression, and self-reliance, with participants leaving no trace behind.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Art installations", alt: "Large art installations at Burning Man" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "The Man burning", alt: "Burning of the Man structure" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Desert celebration", alt: "Desert festival gathering" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Performance art", alt: "Performance artist at Burning Man" }
                ],
                duration: "1 week",
                scale: "International"
            },
            {
                id: 22,
                name: "Durbar Festival",
                country: "Nigeria",
                continent: "Africa",
                month: 5,
                purpose: "Nigerian festival celebrating Hausa culture with colorful horse parades and traditional ceremonies.",
                history: "The Durbar Festival has roots in ancient Hausa kingdoms of northern Nigeria, dating back centuries. The festival celebrates the chiefs and their cultural heritage through elaborate processions. During the Kano or Katsina Durbar, thousands gather to witness traditional Emir processions, displaying centuries-old customs and traditions.",
                mainActivities: [
                    "Decorated horse parades with Emirs",
                    "Traditional Hausa music and drumming",
                    "Ceremonial processions",
                    "Vibrant traditional costumes",
                    "Wrestling competitions",
                    "Community celebrations"
                ],
                didYouKnow: "The Durbar horses are elaborately decorated with expensive fabrics and ornaments. During the Kano Durbar, over 10,000 horses participate in the procession, making it a spectacular sight.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Decorated horses", alt: "Elaborately decorated horse at Durbar parade" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Traditional procession", alt: "Durbar procession with decorated horses" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Ceremonial dress", alt: "Traditional Hausa ceremonial clothing" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Community gathering", alt: "Crowd watching Durbar festival" }
                ],
                duration: "2 days",
                scale: "National"
            },
            {
                id: 23,
                name: "Haru Matsuri (Spring Festival)",
                country: "Japan",
                continent: "Asia",
                month: 3,
                purpose: "Japanese spring festival celebrating cherry blossoms and renewal with cultural performances.",
                history: "Haru Matsuri celebrates the arrival of spring in Japan. While springtime festivals occur throughout Japan, the most iconic are the cherry blossom festivals (Sakura Matsuri). These festivals date back centuries and blend Shinto traditions with celebrations of natural beauty. Cherry blossoms symbolize the fleeting nature of life in Japanese culture.",
                mainActivities: [
                    "Cherry blossom viewing (hanami)",
                    "Picnics under blooming trees",
                    "Traditional music performances",
                    "Lantern-lit evening celebrations",
                    "Temple visits and prayers",
                    "Traditional food stalls"
                ],
                didYouKnow: "Hanami (cherry blossom viewing) is a major cultural event in Japan. Families and friends gather under blooming trees for celebrations, and the peak bloom dates are announced nationally.",
                images: [
                    { url: "https://images.unsplash.com/photo-1522383507177-86626cdcd8ad?w=800", caption: "Cherry blossoms", alt: "Beautiful cherry blossom trees in full bloom" },
                    { url: "https://images.unsplash.com/photo-1549912359-1a2e7a23e6ef?w=800", caption: "Hanami picnic", alt: "People picnicking under cherry trees" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Festival gathering", alt: "Crowd at cherry blossom festival" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Night illumination", alt: "Cherry blossoms illuminated at night" }
                ],
                duration: "2 weeks",
                scale: "National"
            },
            {
                id: 24,
                name: "Hermanus Whale Festival",
                country: "South Africa",
                continent: "Africa",
                month: 9,
                purpose: "South African festival celebrating the arrival of southern right whales with cultural performances.",
                history: "The Hermanus Whale Festival began in 1991 as a way to celebrate and raise awareness about whale watching in Hermanus, South Africa. The festival coincides with the southern right whale migration season. It has grown into one of South Africa's most popular festivals, combining marine conservation with cultural celebration.",
                mainActivities: [
                    "Whale watching and marine viewing",
                    "Live music and performances",
                    "Art and craft displays",
                    "Cultural exhibitions",
                    "Children's entertainment",
                    "Food and wine tasting"
                ],
                didYouKnow: "The Hermanus Whale Festival attracts around 100,000 visitors annually. Southern right whales can be seen from the shore, making it a unique land-based whale watching experience.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Whale watching", alt: "Southern right whale near shore" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Festival celebration", alt: "Festival crowd and celebrations" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Marine conservation", alt: "Whale and marine life display" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Festival entertainment", alt: "Live performance at festival" }
                ],
                duration: "3 days",
                scale: "International"
            },
            {
                id: 25,
                name: "Fête de la Musique",
                country: "France",
                continent: "Europe",
                month: 6,
                purpose: "World Music Day celebration promoting free music performances and accessibility in public spaces.",
                history: "Fête de la Musique (Music Day) was created in 1982 by French authorities to promote music accessibility. Starting as a French initiative, it has grown into a worldwide celebration observed in over 120 countries. The festival encourages both professional and amateur musicians to perform for free in public spaces, democratizing music.",
                mainActivities: [
                    "Free concerts and performances",
                    "Street musicians performing",
                    "Public park concerts",
                    "Church and venue performances",
                    "Classical to electronic music",
                    "Community celebrations"
                ],
                didYouKnow: "Fête de la Musique is celebrated in over 120 countries on June 21st, the summer solstice. In Paris alone, over 4,000 performances occur during the festival.",
                images: [
                    { url: "https://images.unsplash.com/photo-1504681869696-d977211a34a4?w=800", caption: "Street performance", alt: "Street musician performing live" },
                    { url: "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800", caption: "Public concert", alt: "Outdoor public concert" },
                    { url: "https://images.unsplash.com/photo-1599599810694-d6b5e6bbdf62?w=800", caption: "Music celebration", alt: "People enjoying live music" },
                    { url: "https://images.unsplash.com/photo-1533174072545-7eed0b994e6d?w=800", caption: "Festival gathering", alt: "Fête de la Musique street celebration" }
                ],
                duration: "1 day",
                scale: "International"
            }
        ];

        // State Management
        let currentFestivals = [...festivalsData];
        let selectedContinent = null;
        let selectedMonth = 0;
        let searchQuery = '';
        let currentDetailFestival = null;
        let galleryIndex = 0;
        let galleryAutoplay = null;

        // Month Names
        const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            initializeMap();
            initializeFilters();
            initializeTimeline();
            renderFestivals();
            initializeModal();
            initializeKeyboardNavigation();
        });

        // Map Functionality
        function initializeMap() {
            const continents = document.querySelectorAll('.continent');
            
            continents.forEach(continent => {
                // Click handler
                continent.addEventListener('click', () => {
                    handleContinentSelect(continent);
                });

                // Keyboard handler
                continent.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleContinentSelect(continent);
                    }
                });
            });
        }

        function handleContinentSelect(continentElement) {
            const continent = continentElement.dataset.continent;
            const allContinents = document.querySelectorAll('.continent');
            
            // Toggle selection
            if (selectedContinent === continent) {
                selectedContinent = null;
                allContinents.forEach(c => c.classList.remove('active'));
                announceToScreenReader('Filter cleared. Showing all festivals.');
            } else {
                selectedContinent = continent;
                allContinents.forEach(c => c.classList.remove('active'));
                continentElement.classList.add('active');
                const count = festivalsData.filter(f => f.continent === continent).length;
                announceToScreenReader(`Filtering by ${continent}. ${count} festivals found.`);
            }
            
            filterFestivals();
        }

        // Filters Functionality
        function initializeFilters() {
            const searchInput = document.getElementById('search-input');
            const monthSlider = document.getElementById('month-slider');
            const clearButton = document.getElementById('clear-filters');

            // Search with debouncing
            let searchTimeout;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    searchQuery = e.target.value.toLowerCase();
                    filterFestivals();
                }, 300);
            });

            // Month slider
            monthSlider.addEventListener('input', (e) => {
                selectedMonth = parseInt(e.target.value);
                const monthLabel = document.getElementById('month-label');
                monthLabel.textContent = selectedMonth === 0 ? 'All Months' : monthNames[selectedMonth - 1];
                monthSlider.setAttribute('aria-valuenow', selectedMonth);
                filterFestivals();
            });

            // Clear filters
            clearButton.addEventListener('click', () => {
                searchInput.value = '';
                monthSlider.value = 0;
                searchQuery = '';
                selectedMonth = 0;
                selectedContinent = null;
                document.getElementById('month-label').textContent = 'All Months';
                document.querySelectorAll('.continent').forEach(c => c.classList.remove('active'));
                filterFestivals();
                announceToScreenReader('All filters cleared.');
            });
        }

        // Filter Logic
        function filterFestivals() {
            currentFestivals = festivalsData.filter(festival => {
                const matchesContinent = !selectedContinent || festival.continent === selectedContinent;
                const matchesMonth = selectedMonth === 0 || festival.month === selectedMonth;
                const matchesSearch = !searchQuery || 
                    festival.name.toLowerCase().includes(searchQuery) ||
                    festival.country.toLowerCase().includes(searchQuery);
                
                return matchesContinent && matchesMonth && matchesSearch;
            });

            renderFestivals();
            announceResultsCount();
        }

        // Render Festival Grid
        function renderFestivals() {
            const grid = document.getElementById('festival-grid');
            const noResults = document.getElementById('no-results');

            if (currentFestivals.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }

            noResults.style.display = 'none';
            grid.innerHTML = currentFestivals.map((festival, index) => `
                <article class="festival-card" role="listitem" tabindex="0" 
                    data-festival-id="${festival.id}"
                    aria-label="${festival.name} festival in ${festival.country}"
                    style="animation-delay: ${index * 0.1}s">
                    <img src="${festival.images[0].url}" 
                         alt="${festival.images[0].alt}" 
                         class="festival-card-image" 
                         loading="lazy" />
                    <div class="festival-card-content">
                        <h3 class="festival-card-title">${festival.name}</h3>
                        <div class="festival-card-meta">
                            <span aria-label="Country">📍 ${festival.country}</span>
                            <span aria-label="Month">📅 ${monthNames[festival.month - 1]}</span>
                        </div>
                    </div>
                    <div class="festival-card-overlay">
                        <p class="overlay-purpose">${festival.purpose}</p>
                        <div class="overlay-activities">
                            <strong>Main Activities:</strong>
                            <ul>
                                ${festival.mainActivities.slice(0, 3).map(activity => `<li>${activity}</li>`).join('')}
                            </ul>
                        </div>
                        <button class="btn btn-primary" aria-label="View details for ${festival.name}">Learn More</button>
                    </div>
                </article>
            `).join('');

            // Add click handlers
            document.querySelectorAll('.festival-card').forEach(card => {
                card.addEventListener('click', () => {
                    const festivalId = parseInt(card.dataset.festivalId);
                    openDetailModal(festivalId);
                });

                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const festivalId = parseInt(card.dataset.festivalId);
                        openDetailModal(festivalId);
                    }
                });
            });
        }

        // Timeline Functionality
        function initializeTimeline() {
            const timelineMonths = document.querySelector('.timeline-months');
            
            // Create month markers
            for (let i = 1; i <= 12; i++) {
                const festivalCount = festivalsData.filter(f => f.month === i).length;
                const monthDiv = document.createElement('div');
                monthDiv.className = 'timeline-month';
                monthDiv.setAttribute('tabindex', '0');
                monthDiv.setAttribute('role', 'button');
                monthDiv.setAttribute('aria-label', `${monthNames[i-1]} - ${festivalCount} festivals`);
                monthDiv.dataset.month = i;
                
                monthDiv.innerHTML = `
                    <div class="month-dot" aria-hidden="true">${festivalCount}</div>
                    <div class="month-label">${monthNames[i-1]}</div>
                `;

                monthDiv.addEventListener('click', () => handleMonthClick(i));
                monthDiv.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleMonthClick(i);
                    }
                });

                timelineMonths.appendChild(monthDiv);
            }
        }

        function handleMonthClick(month) {
            const container = document.getElementById('month-festivals-container');
            const existingMonth = document.querySelector('.month-festivals.active');
            const monthElements = document.querySelectorAll('.timeline-month');
            
            // Toggle if clicking same month
            if (existingMonth && existingMonth.dataset.month == month) {
                existingMonth.remove();
                monthElements.forEach(m => m.classList.remove('active'));
                announceToScreenReader('Month details closed.');
                return;
            }

            // Remove existing
            if (existingMonth) existingMonth.remove();
            monthElements.forEach(m => m.classList.remove('active'));

            // Add active state
            const activeMonth = document.querySelector(`[data-month="${month}"]`);
            activeMonth.classList.add('active');

            // Get festivals for this month
            const monthFestivals = festivalsData.filter(f => f.month === month);
            
            const monthDiv = document.createElement('div');
            monthDiv.className = 'month-festivals active';
            monthDiv.dataset.month = month;
            monthDiv.innerHTML = `
                <h3>${monthNames[month - 1]} Festivals (${monthFestivals.length})</h3>
                <div class="month-festivals-grid">
                    ${monthFestivals.map(festival => `
                        <div class="month-festival-item" tabindex="0" 
                             data-festival-id="${festival.id}"
                             role="button"
                             aria-label="${festival.name} in ${festival.country}">
                            <h4>${festival.name}</h4>
                            <p>${festival.country}</p>
                        </div>
                    `).join('')}
                </div>
            `;

            container.appendChild(monthDiv);

            // Add click handlers
            monthDiv.querySelectorAll('.month-festival-item').forEach(item => {
                item.addEventListener('click', () => {
                    const festivalId = parseInt(item.dataset.festivalId);
                    openDetailModal(festivalId);
                });

                item.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const festivalId = parseInt(item.dataset.festivalId);
                        openDetailModal(festivalId);
                    }
                });
            });

            announceToScreenReader(`${monthNames[month - 1]} festivals displayed. ${monthFestivals.length} festivals found.`);
        }

        // Detail Modal
        function initializeModal() {
            const modal = document.getElementById('detail-modal');
            const closeBtn = document.getElementById('close-modal');

            closeBtn.addEventListener('click', closeDetailModal);

            // Close on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    closeDetailModal();
                }
            });

            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeDetailModal();
                }
            });
        }

        function openDetailModal(festivalId) {
            const festival = festivalsData.find(f => f.id === festivalId);
            if (!festival) return;

            currentDetailFestival = festival;
            galleryIndex = 0;

            const modal = document.getElementById('detail-modal');
            const modalContent = document.getElementById('modal-content');

            modalContent.innerHTML = `
                <header class="detail-header">
                    <h2 id="detail-modal-title" class="detail-title">${festival.name}</h2>
                    <div class="detail-meta">
                        <div class="detail-meta-item">
                            <strong>Country:</strong> ${festival.country}
                        </div>
                        <div class="detail-meta-item">
                            <strong>Continent:</strong> ${festival.continent}
                        </div>
                        <div class="detail-meta-item">
                            <strong>Month:</strong> ${monthNames[festival.month - 1]}
                        </div>
                        <div class="detail-meta-item">
                            <strong>Duration:</strong> ${festival.duration}
                        </div>
                        <div class="detail-meta-item">
                            <strong>Scale:</strong> ${festival.scale}
                        </div>
                    </div>
                </header>

                <section class="gallery" aria-label="Festival photo gallery">
                    <div class="gallery-main">
                        ${festival.images.map((img, index) => `
                            <img src="${img.url}" 
                                 alt="${img.alt}" 
                                 class="gallery-image ${index === 0 ? 'active' : ''}" 
                                 data-index="${index}" />
                        `).join('')}
                        <div class="gallery-caption" id="gallery-caption">
                            ${festival.images[0].caption}
                        </div>
                        <div class="gallery-controls">
                            <button class="gallery-btn" id="gallery-prev" aria-label="Previous image">‹</button>
                            <button class="gallery-btn" id="gallery-next" aria-label="Next image">›</button>
                        </div>
                    </div>
                    <div class="gallery-thumbnails" role="list" aria-label="Gallery thumbnails">
                        ${festival.images.map((img, index) => `
                            <img src="${img.url}" 
                                 alt="Thumbnail ${index + 1}" 
                                 class="gallery-thumb ${index === 0 ? 'active' : ''}" 
                                 data-index="${index}"
                                 tabindex="0"
                                 role="button"
                                 aria-label="View image ${index + 1}: ${img.caption}" />
                        `).join('')}
                    </div>
                </section>

                <section class="detail-section">
                    <h3>History</h3>
                    <p>${festival.history}</p>
                </section>

                <section class="detail-section">
                    <h3>Main Activities</h3>
                    <ul class="activities-list">
                        ${festival.mainActivities.map(activity => `<li>${activity}</li>`).join('')}
                    </ul>
                </section>

                <section class="detail-section">
                    <div class="did-you-know">
                        <strong>Did You Know?</strong>
                        ${festival.didYouKnow}
                    </div>
                </section>
            `;

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Initialize gallery
            initializeGallery();

            // Focus management
            setTimeout(() => {
                document.getElementById('close-modal').focus();
            }, 100);

            announceToScreenReader(`Viewing details for ${festival.name}`);
        }

        function closeDetailModal() {
            const modal = document.getElementById('detail-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            
            if (galleryAutoplay) {
                clearInterval(galleryAutoplay);
            }

            announceToScreenReader('Festival details closed.');
        }

        // Gallery Functionality
        function initializeGallery() {
            const prevBtn = document.getElementById('gallery-prev');
            const nextBtn = document.getElementById('gallery-next');
            const thumbnails = document.querySelectorAll('.gallery-thumb');

            prevBtn.addEventListener('click', () => changeGalleryImage(-1));
            nextBtn.addEventListener('click', () => changeGalleryImage(1));

            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', () => {
                    const index = parseInt(thumb.dataset.index);
                    setGalleryImage(index);
                });

                thumb.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const index = parseInt(thumb.dataset.index);
                        setGalleryImage(index);
                    }
                });
            });

            // Keyboard navigation
            document.addEventListener('keydown', handleGalleryKeyboard);

            // Auto-play (pause on hover)
            const galleryMain = document.querySelector('.gallery-main');
            startGalleryAutoplay();

            galleryMain.addEventListener('mouseenter', () => {
                if (galleryAutoplay) clearInterval(galleryAutoplay);
            });

            galleryMain.addEventListener('mouseleave', startGalleryAutoplay);
        }

        function handleGalleryKeyboard(e) {
            if (!document.getElementById('detail-modal').classList.contains('active')) return;

            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                changeGalleryImage(-1);
            } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                changeGalleryImage(1);
            }
        }

        function changeGalleryImage(direction) {
            if (!currentDetailFestival) return;
            
            galleryIndex += direction;
            if (galleryIndex < 0) galleryIndex = currentDetailFestival.images.length - 1;
            if (galleryIndex >= currentDetailFestival.images.length) galleryIndex = 0;
            
            setGalleryImage(galleryIndex);
        }

        function setGalleryImage(index) {
            if (!currentDetailFestival) return;
            
            galleryIndex = index;
            const images = document.querySelectorAll('.gallery-image');
            const thumbs = document.querySelectorAll('.gallery-thumb');
            const caption = document.getElementById('gallery-caption');

            images.forEach((img, i) => {
                img.classList.toggle('active', i === index);
            });

            thumbs.forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });

            caption.textContent = currentDetailFestival.images[index].caption;
        }

        function startGalleryAutoplay() {
            if (galleryAutoplay) clearInterval(galleryAutoplay);
            
            galleryAutoplay = setInterval(() => {
                changeGalleryImage(1);
            }, 4000);
        }

        // Keyboard Navigation
        function initializeKeyboardNavigation() {
            // Tab trap in modal
            const modal = document.getElementById('detail-modal');
            
            modal.addEventListener('keydown', (e) => {
                if (!modal.classList.contains('active')) return;
                
                if (e.key === 'Tab') {
                    const focusableElements = modal.querySelectorAll(
                        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
                    );
                    const firstElement = focusableElements[0];
                    const lastElement = focusableElements[focusableElements.length - 1];

                    if (e.shiftKey && document.activeElement === firstElement) {
                        e.preventDefault();
                        lastElement.focus();
                    } else if (!e.shiftKey && document.activeElement === lastElement) {
                        e.preventDefault();
                        firstElement.focus();
                    }
                }
            });
        }

        // Screen Reader Announcements
        function announceToScreenReader(message) {
            const mapStatus = document.getElementById('map-status');
            mapStatus.textContent = message;
            
            // Also update timeline status
            const timelineStatus = document.getElementById('timeline-status');
            if (timelineStatus) {
                timelineStatus.textContent = message;
            }
        }

        function announceResultsCount() {
            const resultsCount = document.getElementById('results-count');
            resultsCount.textContent = `${currentFestivals.length} festival${currentFestivals.length !== 1 ? 's' : ''} found.`;
        }
    </script>
</body>
</html>